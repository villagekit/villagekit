`in` and `out`

Base math: `math.rimu`

```
export
  Vector3
  Quaternion

struct Vector3
  in x: Num
    default = 0

  in y: Num
    default = 0

  in z: Num
    default = 0

  fn length
    in self
    out Num
  =>
    let { x, y, z } = self
    sqrt(x * x, y * y, z * z)

struct Quaternion
  in x: Num
    default = 0

  in y: Num
    default = 0

  in z: Num
    default = 0

  in z: Num
    default = 1
```

3d object trait: `object-3d.rimu`

```
import
  with @std/math
    Vector3
    Quaternion

export Object3d

struct Transform
  in translation: Vector3

  in rotation: Quaternion

  in scale: Vector3

  fn translate
    in self
    in x: Num
    in y: Num
    in z: Num
    out Self
  =>
    Self
      ...self
      translation = Vector3
        self.translation.x + x
        self.translation.y + y
        self.translation.z + z

trait Object3d
  in transform: Transform

  fn translate
    in self
    in Num
    in Num
    in Num
    out Self
  =>
    Self
      ...self
      transform: self.transform.translate(x, y, z)
```

Assembly trait: `assembly.rimu`

```
import
  Object3d = @std/object-3d

export Assembly

Union
  variant = Stock
  variant = Assembly

type Parts = List
  default = []
  item = Union
    variant = Parts
    variant = Part
    variant = Null

trait Assembly
  impl Object3d

  fn parts: Parts
```


Example assembly: `chair.rimu`

```
import
  Assembly = @std/assembly@1
  GridBeam = @villagekit/gridbeam@1
  SmartFasteners = @villagekit/smart-fasteners@1

export Chair

struct Chair
  in seat_width: Num
    label = 'Seat width'
    min = 5
    max = 10
    step = 5

  in seat_depth: Num
    label = 'Seat depth'
    min = 5
    max = 15

  in seat_height: Num
    label = 'Seat height'
    description = 'The height from the ground to the top of the seat'
    min = 5
    max = 15

  in should_include_back: Bool
    label = 'Include back'

  in back_height: Num
    label = 'Back height'
    description = 'The height from the seat to the top of the backrest'
    requires = fn
      in self
    =>
      self.should_include_back
    min = 5
    max = 10

  fn regular
    in self
    out Self
  =>
    meta label = 'Regular (Without Back)'

    Self
      back_height = 10
      seat_depth = 10
      seat_height = 10
      seat_width = 10
      should_include_back = false

  fn regular_with_back
    in self
    out Self
  =>
    meta label = 'Regular With Back'

    Self
      ...Self.regular()
      should_include_back = true

  in self.plugins = [SmartFasteners()]

  impl Assembly
    fn parts
      in self
    =>
      let with self
        seat_width
        seat_depth
        seat_height
        back_height
        should_include_back

      let back_z_beam_end_z = if should_include_back then seat_height + back_height else seat_height
      let seat_panel_start_y = if should_include_back then -1 else 0
      let seat_panel_end_y = if should_include_back then seat_depth - 1 else seat_depth

      List
        GridPanel.XY
          x: [0, seat_width]
          y: [seat_panel_start_y, seat_panel_end_y]
          z: seatHeight

        if should_include_back
          GridPanel.XZ
            x: [0, seat_width]
            y: seat_depth - 2
            z: [seat_height + 1, seat_height + 1 + back_height]
            fit: 'top'

        GridBeam.Z
          x: 0
          y: 0
          z: [0, seat_height]

        GridBeam.Z
          x: seat_width - 1
          y: 0
          z: [0, seat_height]

        GridBeam.Z
          x: 0
          y: seat_depth - 1
          z: [0, back_z_beam_end_z]

        GridBeam.Z
          x: seat_width - 1
          y: seat_depth - 1
          z: [0, back_z_beam_end_z]

        GridBeam.X
          x: [0, seat_width]
          y: 1
          z: seat_height - 2

        GridBeam.X
          x: [0, seat_width]
          y: seat_depth - 2
          z: seat_height - 2

        GridBeam.Y
          x: 1
          y: [0, seat_depth]
          z: seat_height - 1

        GridBeam.Y
          x: seat_width - 2
          y: [0, seat_depth]
          z: seat_height - 1
```

Renderable struct `renderable.rimu`

```
export Renderable

enum Mesh
  case Cuboid
    x_length: Num
    y_length: Num
    z_length: Num

enum Material
  case Color
    color: Color

struct Instance
  in mesh: Str
  in material: Str
  in transform: Transform
  in children: List
    item = Self

struct Renderable
  in meshes: Map
    key = Str
    value = Mesh
  in materials: Map
    key = Str
    value = Material
  in instances: List
    item = Instance
```

Stock trait: `stock.rimu`

```
import
let Object3d = import("@std/object-3d")

let export = Stock

trait Stock: Object3d
  fn render
    in self
    out Renderable
```

Example stock part: `gridbeam.rimu`

```
let Stock = import("@std/stock")

let export = GridBeam

struct GridBeam
  in length: Num
    label = "Length"
    description = "The length of the beam in grid units"

  fn X
    in x: [Num, Num]
    in y: Num
    in z: Num
    out Self
  =>
    pipe
      Self({ length: abs(x.1 - x.0) })
      _.rotate()
    # ...

  impl Stock
    fn render
      in self
      out Rendable
    =>
      # ...
```
